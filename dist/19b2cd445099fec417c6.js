class Card{constructor(a,e,t){this.suit=a,this.rank=e,this.imageUrl=t}}class Deck{constructor(){this.cards=[],this.createDeck()}createDeck(){const a=["C","D","H","S"],e=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];for(const t of a)for(const a of e){let e=new Card(t,a,"./cards/"+a+t+".svg");this.cards.push(e)}}shuffle(){for(let a=0;a<this.cards.length;a++){let e=this.cards[a],t=Math.floor(Math.random()*this.cards.length);this.cards[a]=this.cards[t],this.cards[t]=e}}dealCard(){return this.cards.pop()}}class hand{constructor(a){this.cards=[],this.sum=0,this.playing=!1,this.cardEl=document.getElementById(a),this.blackjack=!1,this.aceCount=0}drawCard(){if(this.playing){let a=deck.dealCard();this.cards.push(a),"A"===a.rank&&(this.aceCount+=1),this.sum=this.sumCards(),this.cardEl.innerHTML+=`<img class="card-image" src="${a.imageUrl}" alt="${a.rank+a.suit}">`}}drawCardOne(){if(this.playing){let a=new Card("S","A","./cards/AS.svg");this.cards.push(a),"A"===a.rank&&(this.aceCount+=1),this.sum=this.sumCards(),this.cardEl.innerHTML+=`<img class="card-image" src="${a.imageUrl}" alt="${a.rank+a.suit}">`}}drawCardTwo(){if(this.playing){let a=new Card("S","K","./cards/KS.svg");this.cards.push(a),"A"===a.rank&&(this.aceCount+=1),this.sum=this.sumCards(),this.cardEl.innerHTML+=`<img class="card-image" src="${a.imageUrl}" alt="${a.rank+a.suit}">`}}hit(){if(this.playing){let a=deck.dealCard();this.cards.push(a),"A"===a.rank&&(this.aceCount+=1),this.sum=this.sumCards(),this.cardEl.innerHTML+=`<img class="card-image" src="${a.imageUrl}" alt="${a.rank+a.suit}">`,21===this.sum?endHand():this.sum>21&&(this.playing=!1,endHand())}}stay(){this.playing&&(console.log(playerData.name+" stays at "+this.sum),endHand())}sumCards(){let a=0;for(let e=0;e<this.cards.length;e++)["1","2","3","4","5","6","7","8","9","10"].includes(this.cards[e].rank)?a+=parseInt(this.cards[e].rank):["J","Q","K"].includes(this.cards[e].rank)?a+=10:a+=11;if(this.aceCount>0&&a>21){let e=this.aceCount;for(;a>21&&e>0;)a-=10,e-=1}return a}reset(){this.cards=[],this.sum=0,this.playing=!1,this.blackjack=!1,this.playing=!0,this.aceCount=0}}let playerData={name:"Player",cash:100,bet:0},playerEl=document.getElementById("player-el");playerEl.textContent=playerData.name+": $"+playerData.cash;let messageEl=document.getElementById("message-el"),startEl=document.getElementById("start-el");const player=new hand("player-hand"),dealer=new hand("dealer-hand"),deck=new Deck;function startGame(){startEl.disabled=!0;for(const a of player.cards)deck.cards.push(a);for(const a of dealer.cards)deck.cards.push(a);if(deck.shuffle(),player.cardEl.textContent="Your cards: ",dealer.cardEl.textContent="Dealer's cards: ",player.reset(),dealer.reset(),0==playerData.cash&&(playerData.cash=100),playerEl.textContent=playerData.name+": $"+playerData.cash,placeBet(),playerData.bet<=playerData.cash){player.drawCard(),dealer.drawCard(),player.drawCard(),dealer.drawCard(),dealer.cardEl.innerHTML="Dealer's cards: ",dealer.cardEl.innerHTML+=`<img class="card-image" src="${dealer.cards[0].imageUrl}" alt="${dealer.cards[0].rank+dealer.cards[0].suit}">`,dealer.cardEl.innerHTML+='<img class="card-image" src="./cards/2B.svg" alt="hidden card">';let a="";player.sum=player.sumCards(),21===player.sum?(a="Blackjack!",player.blackjack=!0,endHand()):a="Do you want to hit or stay?",messageEl.textContent=a}else messageEl.textContent="Please place a valid bet"}function endHand(){for(player.playing=!1;dealer.sum<=16;)dealer.drawCard();dealer.cardEl.innerHTML="Dealer's cards: ";for(const a of dealer.cards)dealer.cardEl.innerHTML+=`<img class="card-image" src="${a.imageUrl}" alt="${a.rank+a.suit}">`;player.sum<=21?dealer.sum>21?messageEl.textContent="Dealer busts. You win!":player.sum>dealer.sum?messageEl.textContent="You win!":dealer.sum>player.sum?messageEl.textContent="You lose":messageEl.textContent="Draw":messageEl.textContent="Bust - You lose",processBet(),startEl.disabled=!1}function placeBet(){let a=document.getElementById("bet-el");playerData.bet=a.value}function processBet(){(player.sum>dealer.sum||dealer.sum>21)&&player.sum<=21?player.blackjack?(playerData.cash+=2*parseFloat(playerData.bet),messageEl.textContent+=" Win:"+2*playerData.bet):(playerData.cash+=parseFloat(playerData.bet),messageEl.textContent+=" Win:"+playerData.bet):player.sum===dealer.sum?messageEl.textContent+=". Bet returned":(playerData.cash-=parseFloat(playerData.bet),messageEl.textContent+=" $"+playerData.bet),playerEl.textContent=playerData.name+": $"+playerData.cash}deck.shuffle();